<% layout('layout/boilerplate') %>

    <div class="checkout-wrapper py-5">
        <div class="row g-5">
            <!-- Delivery Information -->
            <div class="col-lg-8">
                <div class="checkout-section mb-5">
                    <div class="d-flex align-items-center mb-4">
                        <div class="step-indicator bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 shadow-sm"
                            style="width: 32px; height: 32px; font-weight: 600;">1</div>
                        <h4 class="mb-0 fw-bold">Shipping Details</h4>
                    </div>

                    <div class="card border-0 shadow-sm rounded-4 p-4 p-md-5 bg-white">
                        <form id="checkoutForm" action="/cart/checkout" method="POST">
                            <div class="row g-3">
                                <div class="col-md-6 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">First Name</label>
                                    <input type="text" name="firstName"
                                        class="form-control rounded-3 border-light-subtle bg-light p-3"
                                        placeholder="John" required>
                                </div>
                                <div class="col-md-6 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">Last Name</label>
                                    <input type="text" name="lastName"
                                        class="form-control rounded-3 border-light-subtle bg-light p-3"
                                        placeholder="Doe" required>
                                </div>
                                <div class="col-12 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">Phone
                                        Number</label>
                                    <input type="tel" name="phone"
                                        class="form-control rounded-3 border-light-subtle bg-light p-3"
                                        placeholder="+63 (912) 345-6789" required>
                                </div>
                                <div class="col-12 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">Street
                                        Address</label>
                                    <input type="text" name="address"
                                        class="form-control rounded-3 border-light-subtle bg-light p-3"
                                        placeholder="Skina, Purok Nangka" required>
                                </div>
                                <div class="col-md-6 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">City</label>
                                    <input type="text" name="city"
                                        class="form-control rounded-3 border-light-subtle bg-light p-3"
                                        placeholder="Cebu" required>
                                </div>
                                <div class="col-md-3 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">Postal
                                        Code</label>
                                    <input type="text" name="postalCode"
                                        class="form-control rounded-3 border-light-subtle bg-light p-3"
                                        placeholder="1000" required>
                                </div>
                                <div class="col-md-3 text-start">
                                    <label class="form-label small text-uppercase fw-bold text-muted">Country</label>
                                    <select name="country"
                                        class="form-select rounded-3 border-light-subtle bg-light p-3">
                                        <option>USA</option>
                                        <option>UK</option>
                                        <option>Canada</option>
                                        <option selected>Philippines</option>
                                    </select>
                                </div>
                            </div>
                    </div>
                </div>

                <div class="checkout-section">
                    <div class="d-flex align-items-center mb-4">
                        <div class="step-indicator bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 shadow-sm"
                            style="width: 32px; height: 32px; font-weight: 600;">2</div>
                        <h4 class="mb-0 fw-bold">Payment Method</h4>
                    </div>

                    <div class="card border-0 shadow-sm rounded-4 p-4 p-md-5 bg-white">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div
                                    class="payment-option p-4 rounded-4 border-2 border-primary bg-primary-subtle d-flex align-items-center cursor-pointer transition-all">
                                    <div class="form-check mb-0">
                                        <input class="form-check-input" type="radio" name="paymentMethod" value="COD"
                                            id="cod" checked>
                                        <label class="form-check-label ms-2 fw-bold" for="cod">
                                            Cash on Delivery
                                        </label>
                                    </div>
                                    <i class="fa-solid fa-money-bill-wave ms-auto text-primary fa-lg"></i>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div
                                    class="payment-option p-4 rounded-4 border border-light-subtle bg-light d-flex align-items-center cursor-pointer transition-all opacity-50">
                                    <div class="form-check mb-0">
                                        <input class="form-check-input" type="radio" name="paymentMethod" value="Card"
                                            id="card" disabled>
                                        <label class="form-check-label ms-2 fw-bold" for="card">
                                            Credit Card
                                        </label>
                                    </div>
                                    <i class="fa-solid fa-credit-card ms-auto text-muted fa-lg"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="col-lg-4">
                <div class="sticky-top" style="top: 100px;">
                    <h4 class="mb-4 fw-bold">Order Review</h4>
                    <div class="card border-0 shadow-lg rounded-4 overflow-hidden bg-white">
                        <div class="card-body p-4">
                            <div class="checkout-items mb-4">
                                <% if (cart && cart.items.length> 0) { %>
                                    <% for (let item of cart.items) { %>
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="checkout-item-img p-1 bg-light rounded-3 me-3"
                                                style="width: 60px; height: 60px;">
                                                <img src="<%= item.product.image %>" class="img-fluid rounded-2"
                                                    alt="<%= item.product.title %>">
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="small fw-bold mb-0 text-truncate" style="max-width: 150px;">
                                                    <%= item.product.title %>
                                                </h6>
                                                <p class="small text-muted mb-0">Qty: <%= item.quantity %>
                                                </p>
                                            </div>
                                            <div class="text-end">
                                                <span class="small fw-bold">$<%= (item.product.price *
                                                        item.quantity).toFixed(2) %></span>
                                            </div>
                                        </div>
                                        <% } %>
                                            <% } %>
                            </div>

                            <hr class="my-4 opacity-50">

                            <div class="d-flex justify-content-between mb-2">
                                <span class="text-muted">Subtotal</span>
                                <span class="fw-bold">$<%= cart.totalPrice.toFixed(2) %></span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span class="text-muted">Shipping</span>
                                <span class="text-success fw-bold">Free</span>
                            </div>
                            <div class="d-flex justify-content-between mb-4">
                                <span class="text-muted">Tax</span>
                                <span class="fw-bold">$0.00</span>
                            </div>

                            <div
                                class="bg-primary-subtle p-3 rounded-4 d-flex justify-content-between align-items-center mb-4">
                                <span class="h5 mb-0 fw-bold text-primary">Total Amount</span>
                                <span class="h4 mb-0 fw-bold text-primary">$<%= cart.totalPrice.toFixed(2) %></span>
                            </div>

                            <button type="submit"
                                class="btn btn-primary w-100 py-3 rounded-pill fw-bold shadow-sm place-order-btn mb-3">
                                Place Order Now <i class="fa-solid fa-check-circle ms-2"></i>
                            </button>
                            </form>

                            <div class="text-center">
                                <p class="small text-muted mb-0">
                                    <i class="fa-solid fa-shield-halved me-1"></i> SSL Encrypted & Secure
                                </p>
                            </div>
                        </div>
                    </div>

                    <a href="/cart" class="btn btn-link text-decoration-none text-muted w-100 mt-3 small">
                        <i class="fa-solid fa-chevron-left me-1"></i> Back to Cart
                    </a>
                </div>
            </div>
        </div>
    </div>